{% extends "base.html" %}

{% block content %}

<div class="ethical-warning">
  <strong>⚠️ Aviso Importante:</strong>
  <ul>
    <li>Este sistema é apoio e consulta rápida. Não substitui o Código de Ética ou o CRP.</li>
    <li>Dados ficam apenas no seu histórico local.</li>
  </ul>
</div>

<section class="card">
  <div style="margin-bottom: 20px;">
    <h2 style="margin:0;">Consulta Ética</h2>
    <p style="color:#64748b; margin-top: 5px;">Selecione uma dúvida abaixo:</p>
  </div>

  {% if questions %}
    <div class="quick-questions-container">
      {% for q in questions %}
        <form method="post" class="quick-form">
          <input type="hidden" name="q" value="{{ q.text }}">
          <button class="quick-btn" type="submit">
            <span class="dot"></span>
            {{ q.text }}
          </button>
        </form>
      {% endfor %}
    </div>
  {% else %}
    <p style="color:#94a3b8; text-align:center;">Nenhuma pergunta carregada.</p>
  {% endif %}

  <form method="post" style="margin-top: 20px; text-align: right;">
    <button class="btn-action" type="submit" name="load_bases" value="1">
      Atualizar Base
    </button>
  </form>

  {% if answer %}
    <div class="answer-container">
      {{ answer|safe }}
    </div>
  {% endif %}
</section>

<section class="card">
  <h3>Atalhos úteis</h3>
  <div class="shortcuts-container">
    <a href="{{ url_for('contrato') }}" class="btn-shortcut">Gerar Contrato</a>
    <a href="{{ url_for('honorarios') }}" class="btn-shortcut">Calculadora</a>
    <a href="{{ url_for('politicas') }}" class="btn-shortcut">Políticas</a>
    <a href="{{ url_for('rede') }}" class="btn-shortcut">Rede</a>
  </div>
</section>

<section class="card">
  <h3>Histórico Recente</h3>
  {% if history %}
    <ul style="list-style: none; padding: 0;">
      {% for h in history %}
        <li style="border-bottom: 1px solid #f1f5f9; padding: 10px 0;">
          <small style="color:#94a3b8;">{{ h.created_at }}</small>
          <div style="font-weight:600; color:#334155;">{{ h.question }}</div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p style="color:#94a3b8;">Sem histórico recente.</p>
  {% endif %}
</section>

{% endblock %}
